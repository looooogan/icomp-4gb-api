<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.common.mapper.IOutsideFactoryMapper">
    <resultMap id="outsideFactoryQueryMap" type="com.common.pojo.OutsideFactory">
        <!-- 场外复磨id -->
        <id property="id" column="outside_factory.id"/>

        <!-- 外委单号 -->
        <result property="orderNum" column="outside_factory.order_num"/>
        <!-- 外委商 -->
        <result property="sharpenProviderCode" column="outside_factory.sharpen_provider_code"/>
        <!-- 材料号 -->
        <result property="materialNum" column="outside_factory.material_num"/>
        <!-- 复磨数量 -->
        <result property="numberGrinding" column="outside_factory.number_grinding"/>
        <!-- 修复类型（0.厂外图层1.厂外复磨） -->
        <result property="grindingType" column="outside_factory.grinding_type"/>
        <!-- 刀具类型（0.钻头1.刀片） -->
        <result property="toolType" column="outside_factory.tool_type"/>
        <!-- 出厂日期 -->
        <result property="manufactureDate" column="outside_factory.manufacture_date"/>
        <!-- 审批人 -->
        <result property="approverCode" column="outside_factory.approver_code"/>
        <!-- 修复状态(1.待出厂 2.已出厂 3.已送回） -->
        <result property="repairState" column="outside_factory.repair_state"/>
        <!--  -->
        <result property="isDel" column="outside_factory.is_del"/>
        <!-- 材料刀编码 -->
        <result property="cuttingToolCode" column="outside_factory.cutting_tool_code"/>
        <!-- 资材单号 -->
        <result property="zcCode" column="outside_factory.zc_code"/>
        <!-- 经手人 -->
        <result property="handlers" column="outside_factory.handlers"/>
        <!-- 邮寄人 -->
        <result property="sender" column="outside_factory.sender"/>
        <!-- 外委方式 -->
        <result property="outWay" column="outside_factory.out_way"/>
        <!-- 操作人 -->
        <result property="opratorName" column="outside_factory.oprator_name"/>
        <!--  -->
        <result property="opratorCode" column="outside_factory.oprator_code"/>
        <!-- 编码 -->
        <result property="code" column="outside_factory.code"/>
        <!-- 启明外委供应商编码 -->
        <result property="qmSharpenProviderCode" column="outside_factory.qm_sharpen_provider_code"/>
        <!-- 启明外委供应商名称 -->
        <result property="qmSharpenProviderName" column="outside_factory.qm_sharpen_provider_name"/>
        <!-- 审批人姓名 -->
        <result property="approverName" column="outside_factory.approver_name"/>
        <!-- 材料刀编码 -->
        <association property="cuttingTool"  column="cutting_tool.code" resultMap="outsideFactoryCuttingToolMap"/>
        <!-- 外委商 -->
        <association property="sharpenProvider"  column="sharpen_provider.code" resultMap="outsideFactorySharpenProviderMap"/>
    </resultMap>
        <resultMap id="outsideFactoryCuttingToolMap" type="com.common.pojo.CuttingTool">
            <!-- 材料刀id -->
            <id property="id" column="cutting_tool.id"/>

            <!-- 刀具编码 -->
            <result property="code" column="cutting_tool.code"/>
            <!-- 库位码 -->
            <result property="libraryCode" column="cutting_tool.library_code"/>
            <!-- 业务编码 -->
            <result property="businessCode" column="cutting_tool.business_code"/>
            <!-- 名称 -->
            <result property="name" column="cutting_tool.name"/>
            <!-- 刀具分类(1刀具2辅具3配套9其他） -->
            <result property="type" column="cutting_tool.type"/>
            <!-- 消耗类别(1:可刃磨钻头2可刃磨刀片3一次性刀片9其他 -->
            <result property="consumeType" column="cutting_tool.consume_type"/>
            <!-- 图纸 -->
            <result property="pic" column="cutting_tool.pic"/>
            <!-- 规格型号 -->
            <result property="specifications" column="cutting_tool.specifications"/>
            <!-- 刃口数 -->
            <result property="cutNumber" column="cutting_tool.cut_number"/>
            <!-- 品牌 -->
            <result property="brand" column="cutting_tool.brand"/>
            <!-- 修磨类别(0:厂内修磨，1厂外修磨，2厂外涂层 -->
            <result property="grinding" column="cutting_tool.grinding"/>
            <!-- 可使用次数 -->
            <result property="sharpenNum" column="cutting_tool.sharpen_num"/>
            <!-- 最大库存 -->
            <result property="materialMax" column="cutting_tool.material_max"/>
            <!-- 最小库存 -->
            <result property="materialMin" column="cutting_tool.material_min"/>
            <!-- 可刃磨次数 -->
            <result property="toolNumber" column="cutting_tool.tool_number"/>
            <!-- 复磨标准 -->
            <result property="sharpenCriterion" column="cutting_tool.sharpen_criterion"/>
            <!-- 刀具长度 -->
            <result property="materialLength" column="cutting_tool.material_length"/>
            <!-- 可刃磨长度 -->
            <result property="sharpenLength" column="cutting_tool.sharpen_length"/>
            <!--  -->
            <result property="isDel" column="cutting_tool.is_del"/>
            <!--  -->
            <result property="beiMin" column="cutting_tool.bei_min"/>
            <!--  -->
            <result property="beiMax" column="cutting_tool.bei_max"/>
            <!--  -->
            <result property="toolPrice" column="cutting_tool.tool_price"/>
            <!--  -->
            <result property="averagePrice" column="cutting_tool.average_price"/>
            <!--  -->
            <result property="parametersType" column="cutting_tool.parameters_type"/>
            <!-- 用途类型 1 刀片,钻头，合成刀，热套类 2 一体刀 3筒刀 4专机 9其他 -->
            <result property="userfulType" column="cutting_tool.userful_type"/>
            <!-- 启明编码 -->
            <result property="qimingCode" column="cutting_tool.qiming_code"/>
            <!-- 物料编码 -->
            <result property="wuliaoCode" column="cutting_tool.wuliao_code"/>
        </resultMap>
        <resultMap id="outsideFactorySharpenProviderMap" type="com.common.pojo.SharpenProvider">
            <!-- 供应商id -->
            <id property="id" column="sharpen_provider.id"/>

            <!-- 编码 -->
            <result property="code" column="sharpen_provider.code"/>
            <!-- 名称 -->
            <result property="name" column="sharpen_provider.name"/>
            <!-- 类型 -->
            <result property="type" column="sharpen_provider.type"/>
            <!-- 地址 -->
            <result property="address" column="sharpen_provider.address"/>
            <!--  -->
            <result property="contact" column="sharpen_provider.contact"/>
            <!-- 联系人电话 -->
            <result property="tell" column="sharpen_provider.tell"/>
            <!--  -->
            <result property="isDel" column="sharpen_provider.is_del"/>
        </resultMap>
    <!--添加-->
    <insert id="addOutsideFactory" parameterType="com.common.pojo.OutsideFactory">
        INSERT INTO outside_factory (
            <!-- 场外复磨id -->
            id,
            <!-- 外委单号 -->
            order_num,
            <!-- 外委商 -->
            sharpen_provider_code,
            <!-- 材料号 -->
            material_num,
            <!-- 复磨数量 -->
            number_grinding,
            <!-- 修复类型（0.厂外图层1.厂外复磨） -->
            grinding_type,
            <!-- 刀具类型（0.钻头1.刀片） -->
            tool_type,
            <!-- 出厂日期 -->
            manufacture_date,
            <!-- 审批人 -->
            approver_code,
            <!-- 修复状态(1.待出厂 2.已出厂 3.已送回） -->
            repair_state,
            <!--  -->
            is_del,
            <!-- 材料刀编码 -->
            cutting_tool_code,
            <!-- 资材单号 -->
            zc_code,
            <!-- 经手人 -->
            handlers,
            <!-- 邮寄人 -->
            sender,
            <!-- 外委方式 -->
            out_way,
            <!-- 操作人 -->
            oprator_name,
            <!--  -->
            oprator_code,
            <!-- 编码 -->
            code,
            <!-- 启明外委供应商编码 -->
            qm_sharpen_provider_code,
            <!-- 启明外委供应商名称 -->
            qm_sharpen_provider_name,
            <!-- 审批人姓名 -->
            approver_name
        )
        VALUES (
            <!-- 场外复磨id -->
            #{id},
            <!-- 外委单号 -->
            #{orderNum},
            <!-- 外委商 -->
            #{sharpenProviderCode},
            <!-- 材料号 -->
            #{materialNum},
            <!-- 复磨数量 -->
            #{numberGrinding},
            <!-- 修复类型（0.厂外图层1.厂外复磨） -->
            #{grindingType},
            <!-- 刀具类型（0.钻头1.刀片） -->
            #{toolType},
            <!-- 出厂日期 -->
            #{manufactureDate},
            <!-- 审批人 -->
            #{approverCode},
            <!-- 修复状态(1.待出厂 2.已出厂 3.已送回） -->
            #{repairState},
            <!--  -->
            #{isDel},
            <!-- 材料刀编码 -->
            #{cuttingToolCode},
            <!-- 资材单号 -->
            #{zcCode},
            <!-- 经手人 -->
            #{handlers},
            <!-- 邮寄人 -->
            #{sender},
            <!-- 外委方式 -->
            #{outWay},
            <!-- 操作人 -->
            #{opratorName},
            <!--  -->
            #{opratorCode},
            <!-- 编码 -->
            #{code},
            <!-- 启明外委供应商编码 -->
            #{qmSharpenProviderCode},
            <!-- 启明外委供应商名称 -->
            #{qmSharpenProviderName},
            <!-- 审批人姓名 -->
            #{approverName}
        )
    </insert>

    <!--删除-->
    <delete id="delOutsideFactory" parameterType="com.common.pojo.OutsideFactory">
        DELETE
        FROM outside_factory
        WHERE
            1 = 1
            and id = #{id}
    </delete>

    <!--逻辑删除-->
    <delete id="delOutsideFactoryForLogic" parameterType="com.common.pojo.OutsideFactory">
        UPDATE outside_factory SET
        is_del = 1
        WHERE
            1 = 1
            and id = #{id}
    </delete>

    <!--根据VO删除-->
    <delete id="delOutsideFactoryByVo" parameterType="com.common.vo.OutsideFactoryVO">
        UPDATE outside_factory SET is_del = 1
        WHERE
            1=1
            <!-- 场外复磨id -->
            <if test="id != null and id != '' " >
                and id =  #{id}
            </if>
            <!-- 外委单号 -->
            <if test="orderNum != null and orderNum != '' " >
                and order_num =  #{orderNum}
            </if>
            <!-- 外委商 -->
            <if test="sharpenProviderCode != null and sharpenProviderCode != '' " >
                and sharpen_provider_code =  #{sharpenProviderCode}
            </if>
            <!-- 材料号 -->
            <if test="materialNum != null and materialNum != '' " >
                and material_num =  #{materialNum}
            </if>
            <!-- 复磨数量 -->
            <if test="numberGrinding != null and numberGrinding != '' " >
                and number_grinding =  #{numberGrinding}
            </if>
            <!-- 修复类型（0.厂外图层1.厂外复磨） -->
            <if test="grindingType != null and grindingType != '' " >
                and grinding_type =  #{grindingType}
            </if>
            <!-- 刀具类型（0.钻头1.刀片） -->
            <if test="toolType != null and toolType != '' " >
                and tool_type =  #{toolType}
            </if>
            <!-- 出厂日期 -->
            <if test="manufactureDate != null and manufactureDate != '' " >
                and manufacture_date =  #{manufactureDate}
            </if>
            <!-- 审批人 -->
            <if test="approverCode != null and approverCode != '' " >
                and approver_code =  #{approverCode}
            </if>
            <!-- 修复状态(1.待出厂 2.已出厂 3.已送回） -->
            <if test="repairState != null and repairState != '' " >
                and repair_state =  #{repairState}
            </if>
            <!--  -->
            <if test="isDel != null and isDel != '' " >
                and is_del =  #{isDel}
            </if>
            <!-- 材料刀编码 -->
            <if test="cuttingToolCode != null and cuttingToolCode != '' " >
                and cutting_tool_code =  #{cuttingToolCode}
            </if>
            <!-- 资材单号 -->
            <if test="zcCode != null and zcCode != '' " >
                and zc_code =  #{zcCode}
            </if>
            <!-- 经手人 -->
            <if test="handlers != null and handlers != '' " >
                and handlers =  #{handlers}
            </if>
            <!-- 邮寄人 -->
            <if test="sender != null and sender != '' " >
                and sender =  #{sender}
            </if>
            <!-- 外委方式 -->
            <if test="outWay != null and outWay != '' " >
                and out_way =  #{outWay}
            </if>
            <!-- 操作人 -->
            <if test="opratorName != null and opratorName != '' " >
                and oprator_name =  #{opratorName}
            </if>
            <!--  -->
            <if test="opratorCode != null and opratorCode != '' " >
                and oprator_code =  #{opratorCode}
            </if>
            <!-- 编码 -->
            <if test="code != null and code != '' " >
                and code =  #{code}
            </if>
            <!-- 启明外委供应商编码 -->
            <if test="qmSharpenProviderCode != null and qmSharpenProviderCode != '' " >
                and qm_sharpen_provider_code =  #{qmSharpenProviderCode}
            </if>
            <!-- 启明外委供应商名称 -->
            <if test="qmSharpenProviderName != null and qmSharpenProviderName != '' " >
                and qm_sharpen_provider_name =  #{qmSharpenProviderName}
            </if>
            <!-- 审批人姓名 -->
            <if test="approverName != null and approverName != '' " >
                and approver_name =  #{approverName}
            </if>
    </delete>

    <!--更新,如果属性不为null 则更新该属性,根据id更新 -->
    <update id="updOutsideFactory" parameterType="com.common.pojo.OutsideFactory">
        UPDATE outside_factory
        SET
            <!-- 外委单号 -->
            <if test="orderNum != null and orderNum != '' " >
                order_num =  #{orderNum},
            </if>
            <!-- 外委商 -->
            <if test="sharpenProviderCode != null and sharpenProviderCode != '' " >
                sharpen_provider_code =  #{sharpenProviderCode},
            </if>
            <!-- 材料号 -->
            <if test="materialNum != null and materialNum != '' " >
                material_num =  #{materialNum},
            </if>
            <!-- 复磨数量 -->
            <if test="numberGrinding != null and numberGrinding != '' " >
                number_grinding =  #{numberGrinding},
            </if>
            <!-- 修复类型（0.厂外图层1.厂外复磨） -->
            <if test="grindingType != null and grindingType != '' " >
                grinding_type =  #{grindingType},
            </if>
            <!-- 刀具类型（0.钻头1.刀片） -->
            <if test="toolType != null and toolType != '' " >
                tool_type =  #{toolType},
            </if>
            <!-- 出厂日期 -->
            <if test="manufactureDate != null and manufactureDate != '' " >
                manufacture_date =  #{manufactureDate},
            </if>
            <!-- 审批人 -->
            <if test="approverCode != null and approverCode != '' " >
                approver_code =  #{approverCode},
            </if>
            <!-- 修复状态(1.待出厂 2.已出厂 3.已送回） -->
            <if test="repairState != null and repairState != '' " >
                repair_state =  #{repairState},
            </if>
            <!--  -->
            <if test="isDel != null and isDel != '' " >
                is_del =  #{isDel},
            </if>
            <!-- 材料刀编码 -->
            <if test="cuttingToolCode != null and cuttingToolCode != '' " >
                cutting_tool_code =  #{cuttingToolCode},
            </if>
            <!-- 资材单号 -->
            <if test="zcCode != null and zcCode != '' " >
                zc_code =  #{zcCode},
            </if>
            <!-- 经手人 -->
            <if test="handlers != null and handlers != '' " >
                handlers =  #{handlers},
            </if>
            <!-- 邮寄人 -->
            <if test="sender != null and sender != '' " >
                sender =  #{sender},
            </if>
            <!-- 外委方式 -->
            <if test="outWay != null and outWay != '' " >
                out_way =  #{outWay},
            </if>
            <!-- 操作人 -->
            <if test="opratorName != null and opratorName != '' " >
                oprator_name =  #{opratorName},
            </if>
            <!--  -->
            <if test="opratorCode != null and opratorCode != '' " >
                oprator_code =  #{opratorCode},
            </if>
            <!-- 编码 -->
            <if test="code != null and code != '' " >
                code =  #{code},
            </if>
            <!-- 启明外委供应商编码 -->
            <if test="qmSharpenProviderCode != null and qmSharpenProviderCode != '' " >
                qm_sharpen_provider_code =  #{qmSharpenProviderCode},
            </if>
            <!-- 启明外委供应商名称 -->
            <if test="qmSharpenProviderName != null and qmSharpenProviderName != '' " >
                qm_sharpen_provider_name =  #{qmSharpenProviderName},
            </if>
            <!-- 审批人姓名 -->
            <if test="approverName != null and approverName != '' " >
                approver_name =  #{approverName},
            </if>
            <!-- 场外复磨id -->
            id = #{id}
        WHERE
            1 = 1
            and id = #{id}
    </update>

    <!--分页查询 -->
    <select id="getOutsideFactoryByPage" parameterType="com.common.vo.OutsideFactoryVO" resultMap="outsideFactoryQueryMap">
        SELECT
        /*outsideFactory begin*/
            <!-- 场外复磨id -->
            outside_factory.id as 'outside_factory.id',
            <!-- 外委单号 -->
            outside_factory.order_num as 'outside_factory.order_num',
            <!-- 外委商 -->
            outside_factory.sharpen_provider_code as 'outside_factory.sharpen_provider_code',
            <!-- 材料号 -->
            outside_factory.material_num as 'outside_factory.material_num',
            <!-- 复磨数量 -->
            outside_factory.number_grinding as 'outside_factory.number_grinding',
            <!-- 修复类型（0.厂外图层1.厂外复磨） -->
            outside_factory.grinding_type as 'outside_factory.grinding_type',
            <!-- 刀具类型（0.钻头1.刀片） -->
            outside_factory.tool_type as 'outside_factory.tool_type',
            <!-- 出厂日期 -->
            outside_factory.manufacture_date as 'outside_factory.manufacture_date',
            <!-- 审批人 -->
            outside_factory.approver_code as 'outside_factory.approver_code',
            <!-- 修复状态(1.待出厂 2.已出厂 3.已送回） -->
            outside_factory.repair_state as 'outside_factory.repair_state',
            <!--  -->
            outside_factory.is_del as 'outside_factory.is_del',
            <!-- 材料刀编码 -->
            outside_factory.cutting_tool_code as 'outside_factory.cutting_tool_code',
            <!-- 资材单号 -->
            outside_factory.zc_code as 'outside_factory.zc_code',
            <!-- 经手人 -->
            outside_factory.handlers as 'outside_factory.handlers',
            <!-- 邮寄人 -->
            outside_factory.sender as 'outside_factory.sender',
            <!-- 外委方式 -->
            outside_factory.out_way as 'outside_factory.out_way',
            <!-- 操作人 -->
            outside_factory.oprator_name as 'outside_factory.oprator_name',
            <!--  -->
            outside_factory.oprator_code as 'outside_factory.oprator_code',
            <!-- 编码 -->
            outside_factory.code as 'outside_factory.code',
            <!-- 启明外委供应商编码 -->
            outside_factory.qm_sharpen_provider_code as 'outside_factory.qm_sharpen_provider_code',
            <!-- 启明外委供应商名称 -->
            outside_factory.qm_sharpen_provider_name as 'outside_factory.qm_sharpen_provider_name',
            <!-- 审批人姓名 -->
            outside_factory.approver_name as 'outside_factory.approver_name',
        /*outsideFactory end*/
        /*cutting_tool begin*/
            <!-- 材料刀id -->
            cutting_tool.id as 'cutting_tool.id',
            <!-- 刀具编码 -->
            cutting_tool.code as 'cutting_tool.code',
            <!-- 库位码 -->
            cutting_tool.library_code as 'cutting_tool.library_code',
            <!-- 业务编码 -->
            cutting_tool.business_code as 'cutting_tool.business_code',
            <!-- 名称 -->
            cutting_tool.name as 'cutting_tool.name',
            <!-- 刀具分类(1刀具2辅具3配套9其他） -->
            cutting_tool.type as 'cutting_tool.type',
            <!-- 消耗类别(1:可刃磨钻头2可刃磨刀片3一次性刀片9其他 -->
            cutting_tool.consume_type as 'cutting_tool.consume_type',
            <!-- 图纸 -->
            cutting_tool.pic as 'cutting_tool.pic',
            <!-- 规格型号 -->
            cutting_tool.specifications as 'cutting_tool.specifications',
            <!-- 刃口数 -->
            cutting_tool.cut_number as 'cutting_tool.cut_number',
            <!-- 品牌 -->
            cutting_tool.brand as 'cutting_tool.brand',
            <!-- 修磨类别(0:厂内修磨，1厂外修磨，2厂外涂层 -->
            cutting_tool.grinding as 'cutting_tool.grinding',
            <!-- 可使用次数 -->
            cutting_tool.sharpen_num as 'cutting_tool.sharpen_num',
            <!-- 最大库存 -->
            cutting_tool.material_max as 'cutting_tool.material_max',
            <!-- 最小库存 -->
            cutting_tool.material_min as 'cutting_tool.material_min',
            <!-- 可刃磨次数 -->
            cutting_tool.tool_number as 'cutting_tool.tool_number',
            <!-- 复磨标准 -->
            cutting_tool.sharpen_criterion as 'cutting_tool.sharpen_criterion',
            <!-- 刀具长度 -->
            cutting_tool.material_length as 'cutting_tool.material_length',
            <!-- 可刃磨长度 -->
            cutting_tool.sharpen_length as 'cutting_tool.sharpen_length',
            <!--  -->
            cutting_tool.is_del as 'cutting_tool.is_del',
            <!--  -->
            cutting_tool.bei_min as 'cutting_tool.bei_min',
            <!--  -->
            cutting_tool.bei_max as 'cutting_tool.bei_max',
            <!--  -->
            cutting_tool.tool_price as 'cutting_tool.tool_price',
            <!--  -->
            cutting_tool.average_price as 'cutting_tool.average_price',
            <!--  -->
            cutting_tool.parameters_type as 'cutting_tool.parameters_type',
            <!-- 用途类型 1 刀片,钻头，合成刀，热套类 2 一体刀 3筒刀 4专机 9其他 -->
            cutting_tool.userful_type as 'cutting_tool.userful_type',
            <!-- 启明编码 -->
            cutting_tool.qiming_code as 'cutting_tool.qiming_code',
            <!-- 物料编码 -->
            cutting_tool.wuliao_code as 'cutting_tool.wuliao_code',
        /*cutting_tool end*/
        /*sharpen_provider begin*/
            <!-- 供应商id -->
            sharpen_provider.id as 'sharpen_provider.id',
            <!-- 编码 -->
            sharpen_provider.code as 'sharpen_provider.code',
            <!-- 名称 -->
            sharpen_provider.name as 'sharpen_provider.name',
            <!-- 类型 -->
            sharpen_provider.type as 'sharpen_provider.type',
            <!-- 地址 -->
            sharpen_provider.address as 'sharpen_provider.address',
            <!--  -->
            sharpen_provider.contact as 'sharpen_provider.contact',
            <!-- 联系人电话 -->
            sharpen_provider.tell as 'sharpen_provider.tell',
            <!--  -->
            sharpen_provider.is_del as 'sharpen_provider.is_del'
        /*sharpen_provider end*/
        FROM outside_factory as outside_factory
        LEFT JOIN cutting_tool as cutting_tool ON cutting_tool.code = outside_factory.cutting_tool_code
        LEFT JOIN sharpen_provider as sharpen_provider ON sharpen_provider.code = outside_factory.sharpen_provider_code
        WHERE
            1 = 1 AND  outside_factory.is_del = 0
        /*outside_factory begin*/
            <!-- 场外复磨id -->
            <if test="id != null and id != '' " >
                and outside_factory.id = #{id}
            </if>
            <!-- 外委单号 -->
            <if test="orderNum != null and orderNum != '' " >
                and outside_factory.order_num = #{orderNum}
            </if>
            <!-- 外委商 -->
            <if test="sharpenProviderCode != null and sharpenProviderCode != '' " >
                and outside_factory.sharpen_provider_code = #{sharpenProviderCode}
            </if>
            <!-- 材料号 -->
            <if test="materialNum != null and materialNum != '' " >
                and outside_factory.material_num = #{materialNum}
            </if>
            <!-- 复磨数量 -->
            <if test="numberGrinding != null and numberGrinding != '' " >
                and outside_factory.number_grinding = #{numberGrinding}
            </if>
            <!-- 修复类型（0.厂外图层1.厂外复磨） -->
            <if test="grindingType != null and grindingType != '' " >
                and outside_factory.grinding_type = #{grindingType}
            </if>
            <!-- 刀具类型（0.钻头1.刀片） -->
            <if test="toolType != null and toolType != '' " >
                and outside_factory.tool_type = #{toolType}
            </if>
            <!-- 出厂日期 -->
            <if test="manufactureDate != null and manufactureDate != '' " >
                and outside_factory.manufacture_date &lt;= #{manufactureDateEnd}
            </if>
            <if test="manufactureDate != null and manufactureDate != '' " >
                and outside_factory.manufacture_date &gt;= #{manufactureDateBegin}
            </if>
            <!-- 审批人 -->
            <if test="approverCode != null and approverCode != '' " >
                and outside_factory.approver_code = #{approverCode}
            </if>
            <!-- 修复状态(1.待出厂 2.已出厂 3.已送回） -->
            <if test="repairState != null and repairState != '' " >
                and outside_factory.repair_state = #{repairState}
            </if>
            <!--  -->
            <if test="isDel != null and isDel != '' " >
                and outside_factory.is_del = #{isDel}
            </if>
            <!-- 材料刀编码 -->
            <if test="cuttingToolCode != null and cuttingToolCode != '' " >
                and outside_factory.cutting_tool_code = #{cuttingToolCode}
            </if>
            <!-- 资材单号 -->
            <if test="zcCode != null and zcCode != '' " >
                and outside_factory.zc_code = #{zcCode}
            </if>
            <!-- 经手人 -->
            <if test="handlers != null and handlers != '' " >
                and outside_factory.handlers = #{handlers}
            </if>
            <!-- 邮寄人 -->
            <if test="sender != null and sender != '' " >
                and outside_factory.sender = #{sender}
            </if>
            <!-- 外委方式 -->
            <if test="outWay != null and outWay != '' " >
                and outside_factory.out_way = #{outWay}
            </if>
            <!-- 操作人 -->
            <if test="opratorName != null and opratorName != '' " >
                and outside_factory.oprator_name = #{opratorName}
            </if>
            <!--  -->
            <if test="opratorCode != null and opratorCode != '' " >
                and outside_factory.oprator_code = #{opratorCode}
            </if>
            <!-- 编码 -->
            <if test="code != null and code != '' " >
                and outside_factory.code = #{code}
            </if>
            <!-- 启明外委供应商编码 -->
            <if test="qmSharpenProviderCode != null and qmSharpenProviderCode != '' " >
                and outside_factory.qm_sharpen_provider_code = #{qmSharpenProviderCode}
            </if>
            <!-- 启明外委供应商名称 -->
            <if test="qmSharpenProviderName != null and qmSharpenProviderName != '' " >
                and outside_factory.qm_sharpen_provider_name = #{qmSharpenProviderName}
            </if>
            <!-- 审批人姓名 -->
            <if test="approverName != null and approverName != '' " >
                and outside_factory.approver_name = #{approverName}
            </if>
        /*outside_factory end*/
        /*cutting_tool begin*/
            <if test="cuttingToolVO != null ">
            <!-- 材料刀id -->
            <if test="cuttingToolVO.id != null and cuttingToolVO.id != '' " >
                and cutting_tool.id = #{cuttingToolVO.id}
            </if>
            <!-- 刀具编码 -->
            <if test="cuttingToolVO.code != null and cuttingToolVO.code != '' " >
                and cutting_tool.code = #{cuttingToolVO.code}
            </if>
            <!-- 库位码 -->
            <if test="cuttingToolVO.libraryCode != null and cuttingToolVO.libraryCode != '' " >
                and cutting_tool.library_code = #{cuttingToolVO.libraryCode}
            </if>
            <!-- 业务编码 -->
            <if test="cuttingToolVO.businessCode != null and cuttingToolVO.businessCode != '' " >
                and cutting_tool.business_code = #{cuttingToolVO.businessCode}
            </if>
            <!-- 名称 -->
            <if test="cuttingToolVO.name != null and cuttingToolVO.name != '' " >
                and cutting_tool.name = #{cuttingToolVO.name}
            </if>
            <!-- 刀具分类(1刀具2辅具3配套9其他） -->
            <if test="cuttingToolVO.type != null and cuttingToolVO.type != '' " >
                and cutting_tool.type = #{cuttingToolVO.type}
            </if>
            <!-- 消耗类别(1:可刃磨钻头2可刃磨刀片3一次性刀片9其他 -->
            <if test="cuttingToolVO.consumeType != null and cuttingToolVO.consumeType != '' " >
                and cutting_tool.consume_type = #{cuttingToolVO.consumeType}
            </if>
            <!-- 图纸 -->
            <if test="cuttingToolVO.pic != null and cuttingToolVO.pic != '' " >
                and cutting_tool.pic = #{cuttingToolVO.pic}
            </if>
            <!-- 规格型号 -->
            <if test="cuttingToolVO.specifications != null and cuttingToolVO.specifications != '' " >
                and cutting_tool.specifications = #{cuttingToolVO.specifications}
            </if>
            <!-- 刃口数 -->
            <if test="cuttingToolVO.cutNumber != null and cuttingToolVO.cutNumber != '' " >
                and cutting_tool.cut_number = #{cuttingToolVO.cutNumber}
            </if>
            <!-- 品牌 -->
            <if test="cuttingToolVO.brand != null and cuttingToolVO.brand != '' " >
                and cutting_tool.brand = #{cuttingToolVO.brand}
            </if>
            <!-- 修磨类别(0:厂内修磨，1厂外修磨，2厂外涂层 -->
            <if test="cuttingToolVO.grinding != null and cuttingToolVO.grinding != '' " >
                and cutting_tool.grinding = #{cuttingToolVO.grinding}
            </if>
            <!-- 可使用次数 -->
            <if test="cuttingToolVO.sharpenNum != null and cuttingToolVO.sharpenNum != '' " >
                and cutting_tool.sharpen_num = #{cuttingToolVO.sharpenNum}
            </if>
            <!-- 最大库存 -->
            <if test="cuttingToolVO.materialMax != null and cuttingToolVO.materialMax != '' " >
                and cutting_tool.material_max = #{cuttingToolVO.materialMax}
            </if>
            <!-- 最小库存 -->
            <if test="cuttingToolVO.materialMin != null and cuttingToolVO.materialMin != '' " >
                and cutting_tool.material_min = #{cuttingToolVO.materialMin}
            </if>
            <!-- 可刃磨次数 -->
            <if test="cuttingToolVO.toolNumber != null and cuttingToolVO.toolNumber != '' " >
                and cutting_tool.tool_number = #{cuttingToolVO.toolNumber}
            </if>
            <!-- 复磨标准 -->
            <if test="cuttingToolVO.sharpenCriterion != null and cuttingToolVO.sharpenCriterion != '' " >
                and cutting_tool.sharpen_criterion = #{cuttingToolVO.sharpenCriterion}
            </if>
            <!-- 刀具长度 -->
            <if test="cuttingToolVO.materialLength != null and cuttingToolVO.materialLength != '' " >
                and cutting_tool.material_length = #{cuttingToolVO.materialLength}
            </if>
            <!-- 可刃磨长度 -->
            <if test="cuttingToolVO.sharpenLength != null and cuttingToolVO.sharpenLength != '' " >
                and cutting_tool.sharpen_length = #{cuttingToolVO.sharpenLength}
            </if>
            <!--  -->
            <if test="cuttingToolVO.isDel != null and cuttingToolVO.isDel != '' " >
                and cutting_tool.is_del = #{cuttingToolVO.isDel}
            </if>
            <!--  -->
            <if test="cuttingToolVO.beiMin != null and cuttingToolVO.beiMin != '' " >
                and cutting_tool.bei_min = #{cuttingToolVO.beiMin}
            </if>
            <!--  -->
            <if test="cuttingToolVO.beiMax != null and cuttingToolVO.beiMax != '' " >
                and cutting_tool.bei_max = #{cuttingToolVO.beiMax}
            </if>
            <!--  -->
            <if test="cuttingToolVO.toolPrice != null and cuttingToolVO.toolPrice != '' " >
                and cutting_tool.tool_price = #{cuttingToolVO.toolPrice}
            </if>
            <!--  -->
            <if test="cuttingToolVO.averagePrice != null and cuttingToolVO.averagePrice != '' " >
                and cutting_tool.average_price = #{cuttingToolVO.averagePrice}
            </if>
            <!--  -->
            <if test="cuttingToolVO.parametersType != null and cuttingToolVO.parametersType != '' " >
                and cutting_tool.parameters_type = #{cuttingToolVO.parametersType}
            </if>
            <!-- 用途类型 1 刀片,钻头，合成刀，热套类 2 一体刀 3筒刀 4专机 9其他 -->
            <if test="cuttingToolVO.userfulType != null and cuttingToolVO.userfulType != '' " >
                and cutting_tool.userful_type = #{cuttingToolVO.userfulType}
            </if>
            <!-- 启明编码 -->
            <if test="cuttingToolVO.qimingCode != null and cuttingToolVO.qimingCode != '' " >
                and cutting_tool.qiming_code = #{cuttingToolVO.qimingCode}
            </if>
            <!-- 物料编码 -->
            <if test="cuttingToolVO.wuliaoCode != null and cuttingToolVO.wuliaoCode != '' " >
                and cutting_tool.wuliao_code = #{cuttingToolVO.wuliaoCode}
            </if>
            </if>
        /*cutting_tool end*/
        /*sharpen_provider begin*/
            <if test="sharpenProviderVO != null ">
            <!-- 供应商id -->
            <if test="sharpenProviderVO.id != null and sharpenProviderVO.id != '' " >
                and sharpen_provider.id = #{sharpenProviderVO.id}
            </if>
            <!-- 编码 -->
            <if test="sharpenProviderVO.code != null and sharpenProviderVO.code != '' " >
                and sharpen_provider.code = #{sharpenProviderVO.code}
            </if>
            <!-- 名称 -->
            <if test="sharpenProviderVO.name != null and sharpenProviderVO.name != '' " >
                and sharpen_provider.name = #{sharpenProviderVO.name}
            </if>
            <!-- 类型 -->
            <if test="sharpenProviderVO.type != null and sharpenProviderVO.type != '' " >
                and sharpen_provider.type = #{sharpenProviderVO.type}
            </if>
            <!-- 地址 -->
            <if test="sharpenProviderVO.address != null and sharpenProviderVO.address != '' " >
                and sharpen_provider.address = #{sharpenProviderVO.address}
            </if>
            <!--  -->
            <if test="sharpenProviderVO.contact != null and sharpenProviderVO.contact != '' " >
                and sharpen_provider.contact = #{sharpenProviderVO.contact}
            </if>
            <!-- 联系人电话 -->
            <if test="sharpenProviderVO.tell != null and sharpenProviderVO.tell != '' " >
                and sharpen_provider.tell = #{sharpenProviderVO.tell}
            </if>
            <!--  -->
            <if test="sharpenProviderVO.isDel != null and sharpenProviderVO.isDel != '' " >
                and sharpen_provider.is_del = #{sharpenProviderVO.isDel}
            </if>
            </if>
        /*sharpen_provider end*/
        ORDER BY outside_factory.id desc
        <if test="startRecord != null  and pageSize != null and pageSize !='' ">
        LIMIT #{startRecord},#{pageSize}
        </if>
    </select>


    <!--查询记录数-->
    <select id="getOutsideFactoryCount" parameterType="com.common.vo.OutsideFactoryVO" resultType="java.lang.Integer">
        SELECT COUNT(1)
        FROM outside_factory as outside_factory
        LEFT JOIN cutting_tool as cutting_tool ON cutting_tool.code = outside_factory.cutting_tool_code
        LEFT JOIN sharpen_provider as sharpen_provider ON sharpen_provider.code = outside_factory.sharpen_provider_code
        WHERE
            1 = 1 AND  outside_factory.is_del = 0
        /*outside_factory begin*/
        <!-- 场外复磨id -->
        <if test="id != null and id != '' " >
            and outside_factory.id = #{id}
        </if>
        <!-- 外委单号 -->
        <if test="orderNum != null and orderNum != '' " >
            and outside_factory.order_num = #{orderNum}
        </if>
        <!-- 外委商 -->
        <if test="sharpenProviderCode != null and sharpenProviderCode != '' " >
            and outside_factory.sharpen_provider_code = #{sharpenProviderCode}
        </if>
        <!-- 材料号 -->
        <if test="materialNum != null and materialNum != '' " >
            and outside_factory.material_num = #{materialNum}
        </if>
        <!-- 复磨数量 -->
        <if test="numberGrinding != null and numberGrinding != '' " >
            and outside_factory.number_grinding = #{numberGrinding}
        </if>
        <!-- 修复类型（0.厂外图层1.厂外复磨） -->
        <if test="grindingType != null and grindingType != '' " >
            and outside_factory.grinding_type = #{grindingType}
        </if>
        <!-- 刀具类型（0.钻头1.刀片） -->
        <if test="toolType != null and toolType != '' " >
            and outside_factory.tool_type = #{toolType}
        </if>
        <!-- 出厂日期 -->
        <if test="manufactureDate != null and manufactureDate != '' " >
            and outside_factory.manufacture_date &lt;= #{manufactureDateEnd}
        </if>
        <if test="manufactureDate != null and manufactureDate != '' " >
            and outside_factory.manufacture_date &gt;= #{manufactureDateBegin}
        </if>
        <!-- 审批人 -->
        <if test="approverCode != null and approverCode != '' " >
            and outside_factory.approver_code = #{approverCode}
        </if>
        <!-- 修复状态(1.待出厂 2.已出厂 3.已送回） -->
        <if test="repairState != null and repairState != '' " >
            and outside_factory.repair_state = #{repairState}
        </if>
        <!--  -->
        <if test="isDel != null and isDel != '' " >
            and outside_factory.is_del = #{isDel}
        </if>
        <!-- 材料刀编码 -->
        <if test="cuttingToolCode != null and cuttingToolCode != '' " >
            and outside_factory.cutting_tool_code = #{cuttingToolCode}
        </if>
        <!-- 资材单号 -->
        <if test="zcCode != null and zcCode != '' " >
            and outside_factory.zc_code = #{zcCode}
        </if>
        <!-- 经手人 -->
        <if test="handlers != null and handlers != '' " >
            and outside_factory.handlers = #{handlers}
        </if>
        <!-- 邮寄人 -->
        <if test="sender != null and sender != '' " >
            and outside_factory.sender = #{sender}
        </if>
        <!-- 外委方式 -->
        <if test="outWay != null and outWay != '' " >
            and outside_factory.out_way = #{outWay}
        </if>
        <!-- 操作人 -->
        <if test="opratorName != null and opratorName != '' " >
            and outside_factory.oprator_name = #{opratorName}
        </if>
        <!--  -->
        <if test="opratorCode != null and opratorCode != '' " >
            and outside_factory.oprator_code = #{opratorCode}
        </if>
        <!-- 编码 -->
        <if test="code != null and code != '' " >
            and outside_factory.code = #{code}
        </if>
        <!-- 启明外委供应商编码 -->
        <if test="qmSharpenProviderCode != null and qmSharpenProviderCode != '' " >
            and outside_factory.qm_sharpen_provider_code = #{qmSharpenProviderCode}
        </if>
        <!-- 启明外委供应商名称 -->
        <if test="qmSharpenProviderName != null and qmSharpenProviderName != '' " >
            and outside_factory.qm_sharpen_provider_name = #{qmSharpenProviderName}
        </if>
        <!-- 审批人姓名 -->
        <if test="approverName != null and approverName != '' " >
            and outside_factory.approver_name = #{approverName}
        </if>
        /*outside_factory end*/
        /*cutting_tool begin*/
        <if test="cuttingToolVO != null ">
        <!-- 材料刀id -->
        <if test="cuttingToolVO.id != null and cuttingToolVO.id != '' " >
            and cutting_tool.id = #{cuttingToolVO.id}
        </if>
        <!-- 刀具编码 -->
        <if test="cuttingToolVO.code != null and cuttingToolVO.code != '' " >
            and cutting_tool.code = #{cuttingToolVO.code}
        </if>
        <!-- 库位码 -->
        <if test="cuttingToolVO.libraryCode != null and cuttingToolVO.libraryCode != '' " >
            and cutting_tool.library_code = #{cuttingToolVO.libraryCode}
        </if>
        <!-- 业务编码 -->
        <if test="cuttingToolVO.businessCode != null and cuttingToolVO.businessCode != '' " >
            and cutting_tool.business_code = #{cuttingToolVO.businessCode}
        </if>
        <!-- 名称 -->
        <if test="cuttingToolVO.name != null and cuttingToolVO.name != '' " >
            and cutting_tool.name = #{cuttingToolVO.name}
        </if>
        <!-- 刀具分类(1刀具2辅具3配套9其他） -->
        <if test="cuttingToolVO.type != null and cuttingToolVO.type != '' " >
            and cutting_tool.type = #{cuttingToolVO.type}
        </if>
        <!-- 消耗类别(1:可刃磨钻头2可刃磨刀片3一次性刀片9其他 -->
        <if test="cuttingToolVO.consumeType != null and cuttingToolVO.consumeType != '' " >
            and cutting_tool.consume_type = #{cuttingToolVO.consumeType}
        </if>
        <!-- 图纸 -->
        <if test="cuttingToolVO.pic != null and cuttingToolVO.pic != '' " >
            and cutting_tool.pic = #{cuttingToolVO.pic}
        </if>
        <!-- 规格型号 -->
        <if test="cuttingToolVO.specifications != null and cuttingToolVO.specifications != '' " >
            and cutting_tool.specifications = #{cuttingToolVO.specifications}
        </if>
        <!-- 刃口数 -->
        <if test="cuttingToolVO.cutNumber != null and cuttingToolVO.cutNumber != '' " >
            and cutting_tool.cut_number = #{cuttingToolVO.cutNumber}
        </if>
        <!-- 品牌 -->
        <if test="cuttingToolVO.brand != null and cuttingToolVO.brand != '' " >
            and cutting_tool.brand = #{cuttingToolVO.brand}
        </if>
        <!-- 修磨类别(0:厂内修磨，1厂外修磨，2厂外涂层 -->
        <if test="cuttingToolVO.grinding != null and cuttingToolVO.grinding != '' " >
            and cutting_tool.grinding = #{cuttingToolVO.grinding}
        </if>
        <!-- 可使用次数 -->
        <if test="cuttingToolVO.sharpenNum != null and cuttingToolVO.sharpenNum != '' " >
            and cutting_tool.sharpen_num = #{cuttingToolVO.sharpenNum}
        </if>
        <!-- 最大库存 -->
        <if test="cuttingToolVO.materialMax != null and cuttingToolVO.materialMax != '' " >
            and cutting_tool.material_max = #{cuttingToolVO.materialMax}
        </if>
        <!-- 最小库存 -->
        <if test="cuttingToolVO.materialMin != null and cuttingToolVO.materialMin != '' " >
            and cutting_tool.material_min = #{cuttingToolVO.materialMin}
        </if>
        <!-- 可刃磨次数 -->
        <if test="cuttingToolVO.toolNumber != null and cuttingToolVO.toolNumber != '' " >
            and cutting_tool.tool_number = #{cuttingToolVO.toolNumber}
        </if>
        <!-- 复磨标准 -->
        <if test="cuttingToolVO.sharpenCriterion != null and cuttingToolVO.sharpenCriterion != '' " >
            and cutting_tool.sharpen_criterion = #{cuttingToolVO.sharpenCriterion}
        </if>
        <!-- 刀具长度 -->
        <if test="cuttingToolVO.materialLength != null and cuttingToolVO.materialLength != '' " >
            and cutting_tool.material_length = #{cuttingToolVO.materialLength}
        </if>
        <!-- 可刃磨长度 -->
        <if test="cuttingToolVO.sharpenLength != null and cuttingToolVO.sharpenLength != '' " >
            and cutting_tool.sharpen_length = #{cuttingToolVO.sharpenLength}
        </if>
        <!--  -->
        <if test="cuttingToolVO.isDel != null and cuttingToolVO.isDel != '' " >
            and cutting_tool.is_del = #{cuttingToolVO.isDel}
        </if>
        <!--  -->
        <if test="cuttingToolVO.beiMin != null and cuttingToolVO.beiMin != '' " >
            and cutting_tool.bei_min = #{cuttingToolVO.beiMin}
        </if>
        <!--  -->
        <if test="cuttingToolVO.beiMax != null and cuttingToolVO.beiMax != '' " >
            and cutting_tool.bei_max = #{cuttingToolVO.beiMax}
        </if>
        <!--  -->
        <if test="cuttingToolVO.toolPrice != null and cuttingToolVO.toolPrice != '' " >
            and cutting_tool.tool_price = #{cuttingToolVO.toolPrice}
        </if>
        <!--  -->
        <if test="cuttingToolVO.averagePrice != null and cuttingToolVO.averagePrice != '' " >
            and cutting_tool.average_price = #{cuttingToolVO.averagePrice}
        </if>
        <!--  -->
        <if test="cuttingToolVO.parametersType != null and cuttingToolVO.parametersType != '' " >
            and cutting_tool.parameters_type = #{cuttingToolVO.parametersType}
        </if>
        <!-- 用途类型 1 刀片,钻头，合成刀，热套类 2 一体刀 3筒刀 4专机 9其他 -->
        <if test="cuttingToolVO.userfulType != null and cuttingToolVO.userfulType != '' " >
            and cutting_tool.userful_type = #{cuttingToolVO.userfulType}
        </if>
        <!-- 启明编码 -->
        <if test="cuttingToolVO.qimingCode != null and cuttingToolVO.qimingCode != '' " >
            and cutting_tool.qiming_code = #{cuttingToolVO.qimingCode}
        </if>
        <!-- 物料编码 -->
        <if test="cuttingToolVO.wuliaoCode != null and cuttingToolVO.wuliaoCode != '' " >
            and cutting_tool.wuliao_code = #{cuttingToolVO.wuliaoCode}
        </if>
        </if>
        /*cutting_tool end*/
        /*sharpen_provider begin*/
        <if test="sharpenProviderVO != null ">
        <!-- 供应商id -->
        <if test="sharpenProviderVO.id != null and sharpenProviderVO.id != '' " >
            and sharpen_provider.id = #{sharpenProviderVO.id}
        </if>
        <!-- 编码 -->
        <if test="sharpenProviderVO.code != null and sharpenProviderVO.code != '' " >
            and sharpen_provider.code = #{sharpenProviderVO.code}
        </if>
        <!-- 名称 -->
        <if test="sharpenProviderVO.name != null and sharpenProviderVO.name != '' " >
            and sharpen_provider.name = #{sharpenProviderVO.name}
        </if>
        <!-- 类型 -->
        <if test="sharpenProviderVO.type != null and sharpenProviderVO.type != '' " >
            and sharpen_provider.type = #{sharpenProviderVO.type}
        </if>
        <!-- 地址 -->
        <if test="sharpenProviderVO.address != null and sharpenProviderVO.address != '' " >
            and sharpen_provider.address = #{sharpenProviderVO.address}
        </if>
        <!--  -->
        <if test="sharpenProviderVO.contact != null and sharpenProviderVO.contact != '' " >
            and sharpen_provider.contact = #{sharpenProviderVO.contact}
        </if>
        <!-- 联系人电话 -->
        <if test="sharpenProviderVO.tell != null and sharpenProviderVO.tell != '' " >
            and sharpen_provider.tell = #{sharpenProviderVO.tell}
        </if>
        <!--  -->
        <if test="sharpenProviderVO.isDel != null and sharpenProviderVO.isDel != '' " >
            and sharpen_provider.is_del = #{sharpenProviderVO.isDel}
        </if>
        </if>
        /*sharpen_provider end*/
    </select>

    <!--根据vo查询 -->
    <select id="getOutsideFactory" parameterType="com.common.vo.OutsideFactoryVO" resultMap="outsideFactoryQueryMap">
        SELECT
        /*outside_factory begin*/
        <!-- 场外复磨id -->
        outside_factory.id as 'outside_factory.id',
        <!-- 外委单号 -->
        outside_factory.order_num as 'outside_factory.order_num',
        <!-- 外委商 -->
        outside_factory.sharpen_provider_code as 'outside_factory.sharpen_provider_code',
        <!-- 材料号 -->
        outside_factory.material_num as 'outside_factory.material_num',
        <!-- 复磨数量 -->
        outside_factory.number_grinding as 'outside_factory.number_grinding',
        <!-- 修复类型（0.厂外图层1.厂外复磨） -->
        outside_factory.grinding_type as 'outside_factory.grinding_type',
        <!-- 刀具类型（0.钻头1.刀片） -->
        outside_factory.tool_type as 'outside_factory.tool_type',
        <!-- 出厂日期 -->
        outside_factory.manufacture_date as 'outside_factory.manufacture_date',
        <!-- 审批人 -->
        outside_factory.approver_code as 'outside_factory.approver_code',
        <!-- 修复状态(1.待出厂 2.已出厂 3.已送回） -->
        outside_factory.repair_state as 'outside_factory.repair_state',
        <!--  -->
        outside_factory.is_del as 'outside_factory.is_del',
        <!-- 材料刀编码 -->
        outside_factory.cutting_tool_code as 'outside_factory.cutting_tool_code',
        <!-- 资材单号 -->
        outside_factory.zc_code as 'outside_factory.zc_code',
        <!-- 经手人 -->
        outside_factory.handlers as 'outside_factory.handlers',
        <!-- 邮寄人 -->
        outside_factory.sender as 'outside_factory.sender',
        <!-- 外委方式 -->
        outside_factory.out_way as 'outside_factory.out_way',
        <!-- 操作人 -->
        outside_factory.oprator_name as 'outside_factory.oprator_name',
        <!--  -->
        outside_factory.oprator_code as 'outside_factory.oprator_code',
        <!-- 编码 -->
        outside_factory.code as 'outside_factory.code',
        <!-- 启明外委供应商编码 -->
        outside_factory.qm_sharpen_provider_code as 'outside_factory.qm_sharpen_provider_code',
        <!-- 启明外委供应商名称 -->
        outside_factory.qm_sharpen_provider_name as 'outside_factory.qm_sharpen_provider_name',
        <!-- 审批人姓名 -->
        outside_factory.approver_name as 'outside_factory.approver_name',
        /*outside_factory end*/
        /*cutting_tool begin*/
        <!-- 材料刀id -->
        cutting_tool.id as 'cutting_tool.id',
        <!-- 刀具编码 -->
        cutting_tool.code as 'cutting_tool.code',
        <!-- 库位码 -->
        cutting_tool.library_code as 'cutting_tool.library_code',
        <!-- 业务编码 -->
        cutting_tool.business_code as 'cutting_tool.business_code',
        <!-- 名称 -->
        cutting_tool.name as 'cutting_tool.name',
        <!-- 刀具分类(1刀具2辅具3配套9其他） -->
        cutting_tool.type as 'cutting_tool.type',
        <!-- 消耗类别(1:可刃磨钻头2可刃磨刀片3一次性刀片9其他 -->
        cutting_tool.consume_type as 'cutting_tool.consume_type',
        <!-- 图纸 -->
        cutting_tool.pic as 'cutting_tool.pic',
        <!-- 规格型号 -->
        cutting_tool.specifications as 'cutting_tool.specifications',
        <!-- 刃口数 -->
        cutting_tool.cut_number as 'cutting_tool.cut_number',
        <!-- 品牌 -->
        cutting_tool.brand as 'cutting_tool.brand',
        <!-- 修磨类别(0:厂内修磨，1厂外修磨，2厂外涂层 -->
        cutting_tool.grinding as 'cutting_tool.grinding',
        <!-- 可使用次数 -->
        cutting_tool.sharpen_num as 'cutting_tool.sharpen_num',
        <!-- 最大库存 -->
        cutting_tool.material_max as 'cutting_tool.material_max',
        <!-- 最小库存 -->
        cutting_tool.material_min as 'cutting_tool.material_min',
        <!-- 可刃磨次数 -->
        cutting_tool.tool_number as 'cutting_tool.tool_number',
        <!-- 复磨标准 -->
        cutting_tool.sharpen_criterion as 'cutting_tool.sharpen_criterion',
        <!-- 刀具长度 -->
        cutting_tool.material_length as 'cutting_tool.material_length',
        <!-- 可刃磨长度 -->
        cutting_tool.sharpen_length as 'cutting_tool.sharpen_length',
        <!--  -->
        cutting_tool.is_del as 'cutting_tool.is_del',
        <!--  -->
        cutting_tool.bei_min as 'cutting_tool.bei_min',
        <!--  -->
        cutting_tool.bei_max as 'cutting_tool.bei_max',
        <!--  -->
        cutting_tool.tool_price as 'cutting_tool.tool_price',
        <!--  -->
        cutting_tool.average_price as 'cutting_tool.average_price',
        <!--  -->
        cutting_tool.parameters_type as 'cutting_tool.parameters_type',
        <!-- 用途类型 1 刀片,钻头，合成刀，热套类 2 一体刀 3筒刀 4专机 9其他 -->
        cutting_tool.userful_type as 'cutting_tool.userful_type',
        <!-- 启明编码 -->
        cutting_tool.qiming_code as 'cutting_tool.qiming_code',
        <!-- 物料编码 -->
        cutting_tool.wuliao_code as 'cutting_tool.wuliao_code',
        /*cutting_tool end*/
        /*sharpen_provider begin*/
        <!-- 供应商id -->
        sharpen_provider.id as 'sharpen_provider.id',
        <!-- 编码 -->
        sharpen_provider.code as 'sharpen_provider.code',
        <!-- 名称 -->
        sharpen_provider.name as 'sharpen_provider.name',
        <!-- 类型 -->
        sharpen_provider.type as 'sharpen_provider.type',
        <!-- 地址 -->
        sharpen_provider.address as 'sharpen_provider.address',
        <!--  -->
        sharpen_provider.contact as 'sharpen_provider.contact',
        <!-- 联系人电话 -->
        sharpen_provider.tell as 'sharpen_provider.tell',
        <!--  -->
        sharpen_provider.is_del as 'sharpen_provider.is_del'
        /*sharpen_provider end*/
        FROM outside_factory as outside_factory
        LEFT JOIN cutting_tool as cutting_tool ON cutting_tool.code = outside_factory.cutting_tool_code
        LEFT JOIN sharpen_provider as sharpen_provider ON sharpen_provider.code = outside_factory.sharpen_provider_code
        WHERE
            1 = 1 AND  outside_factory.is_del = 0
        /*outside_factory begin*/
        <!-- 场外复磨id -->
        <if test="id != null and id != '' " >
            and outside_factory.id = #{id}
        </if>
        <!-- 外委单号 -->
        <if test="orderNum != null and orderNum != '' " >
            and outside_factory.order_num = #{orderNum}
        </if>
        <!-- 外委商 -->
        <if test="sharpenProviderCode != null and sharpenProviderCode != '' " >
            and outside_factory.sharpen_provider_code = #{sharpenProviderCode}
        </if>
        <!-- 材料号 -->
        <if test="materialNum != null and materialNum != '' " >
            and outside_factory.material_num = #{materialNum}
        </if>
        <!-- 复磨数量 -->
        <if test="numberGrinding != null and numberGrinding != '' " >
            and outside_factory.number_grinding = #{numberGrinding}
        </if>
        <!-- 修复类型（0.厂外图层1.厂外复磨） -->
        <if test="grindingType != null and grindingType != '' " >
            and outside_factory.grinding_type = #{grindingType}
        </if>
        <!-- 刀具类型（0.钻头1.刀片） -->
        <if test="toolType != null and toolType != '' " >
            and outside_factory.tool_type = #{toolType}
        </if>
        <!-- 出厂日期 -->
        <if test="manufactureDate != null and manufactureDate != '' " >
            and outside_factory.manufacture_date &lt;= #{manufactureDateEnd}
        </if>
        <if test="manufactureDate != null and manufactureDate != '' " >
            and outside_factory.manufacture_date &gt;= #{manufactureDateBegin}
        </if>
        <!-- 审批人 -->
        <if test="approverCode != null and approverCode != '' " >
            and outside_factory.approver_code = #{approverCode}
        </if>
        <!-- 修复状态(1.待出厂 2.已出厂 3.已送回） -->
        <if test="repairState != null and repairState != '' " >
            and outside_factory.repair_state = #{repairState}
        </if>
        <!--  -->
        <if test="isDel != null and isDel != '' " >
            and outside_factory.is_del = #{isDel}
        </if>
        <!-- 材料刀编码 -->
        <if test="cuttingToolCode != null and cuttingToolCode != '' " >
            and outside_factory.cutting_tool_code = #{cuttingToolCode}
        </if>
        <!-- 资材单号 -->
        <if test="zcCode != null and zcCode != '' " >
            and outside_factory.zc_code = #{zcCode}
        </if>
        <!-- 经手人 -->
        <if test="handlers != null and handlers != '' " >
            and outside_factory.handlers = #{handlers}
        </if>
        <!-- 邮寄人 -->
        <if test="sender != null and sender != '' " >
            and outside_factory.sender = #{sender}
        </if>
        <!-- 外委方式 -->
        <if test="outWay != null and outWay != '' " >
            and outside_factory.out_way = #{outWay}
        </if>
        <!-- 操作人 -->
        <if test="opratorName != null and opratorName != '' " >
            and outside_factory.oprator_name = #{opratorName}
        </if>
        <!--  -->
        <if test="opratorCode != null and opratorCode != '' " >
            and outside_factory.oprator_code = #{opratorCode}
        </if>
        <!-- 编码 -->
        <if test="code != null and code != '' " >
            and outside_factory.code = #{code}
        </if>
        <!-- 启明外委供应商编码 -->
        <if test="qmSharpenProviderCode != null and qmSharpenProviderCode != '' " >
            and outside_factory.qm_sharpen_provider_code = #{qmSharpenProviderCode}
        </if>
        <!-- 启明外委供应商名称 -->
        <if test="qmSharpenProviderName != null and qmSharpenProviderName != '' " >
            and outside_factory.qm_sharpen_provider_name = #{qmSharpenProviderName}
        </if>
        <!-- 审批人姓名 -->
        <if test="approverName != null and approverName != '' " >
            and outside_factory.approver_name = #{approverName}
        </if>
        /*outside_factory end*/
        /*cutting_tools begin*/
        <if test="cuttingToolVO != null ">
        <!-- 材料刀id -->
        <if test="cuttingToolVO.id != null and cuttingToolVO.id != '' " >
            and cutting_tools.id = #{cuttingToolVO.id}
        </if>
        <!-- 刀具编码 -->
        <if test="cuttingToolVO.code != null and cuttingToolVO.code != '' " >
            and cutting_tools.code = #{cuttingToolVO.code}
        </if>
        <!-- 库位码 -->
        <if test="cuttingToolVO.libraryCode != null and cuttingToolVO.libraryCode != '' " >
            and cutting_tools.library_code = #{cuttingToolVO.libraryCode}
        </if>
        <!-- 业务编码 -->
        <if test="cuttingToolVO.businessCode != null and cuttingToolVO.businessCode != '' " >
            and cutting_tools.business_code = #{cuttingToolVO.businessCode}
        </if>
        <!-- 名称 -->
        <if test="cuttingToolVO.name != null and cuttingToolVO.name != '' " >
            and cutting_tools.name = #{cuttingToolVO.name}
        </if>
        <!-- 刀具分类(1刀具2辅具3配套9其他） -->
        <if test="cuttingToolVO.type != null and cuttingToolVO.type != '' " >
            and cutting_tools.type = #{cuttingToolVO.type}
        </if>
        <!-- 消耗类别(1:可刃磨钻头2可刃磨刀片3一次性刀片9其他 -->
        <if test="cuttingToolVO.consumeType != null and cuttingToolVO.consumeType != '' " >
            and cutting_tools.consume_type = #{cuttingToolVO.consumeType}
        </if>
        <!-- 图纸 -->
        <if test="cuttingToolVO.pic != null and cuttingToolVO.pic != '' " >
            and cutting_tools.pic = #{cuttingToolVO.pic}
        </if>
        <!-- 规格型号 -->
        <if test="cuttingToolVO.specifications != null and cuttingToolVO.specifications != '' " >
            and cutting_tools.specifications = #{cuttingToolVO.specifications}
        </if>
        <!-- 刃口数 -->
        <if test="cuttingToolVO.cutNumber != null and cuttingToolVO.cutNumber != '' " >
            and cutting_tools.cut_number = #{cuttingToolVO.cutNumber}
        </if>
        <!-- 品牌 -->
        <if test="cuttingToolVO.brand != null and cuttingToolVO.brand != '' " >
            and cutting_tools.brand = #{cuttingToolVO.brand}
        </if>
        <!-- 修磨类别(0:厂内修磨，1厂外修磨，2厂外涂层 -->
        <if test="cuttingToolVO.grinding != null and cuttingToolVO.grinding != '' " >
            and cutting_tools.grinding = #{cuttingToolVO.grinding}
        </if>
        <!-- 可使用次数 -->
        <if test="cuttingToolVO.sharpenNum != null and cuttingToolVO.sharpenNum != '' " >
            and cutting_tools.sharpen_num = #{cuttingToolVO.sharpenNum}
        </if>
        <!-- 最大库存 -->
        <if test="cuttingToolVO.materialMax != null and cuttingToolVO.materialMax != '' " >
            and cutting_tools.material_max = #{cuttingToolVO.materialMax}
        </if>
        <!-- 最小库存 -->
        <if test="cuttingToolVO.materialMin != null and cuttingToolVO.materialMin != '' " >
            and cutting_tools.material_min = #{cuttingToolVO.materialMin}
        </if>
        <!-- 可刃磨次数 -->
        <if test="cuttingToolVO.toolNumber != null and cuttingToolVO.toolNumber != '' " >
            and cutting_tools.tool_number = #{cuttingToolVO.toolNumber}
        </if>
        <!-- 复磨标准 -->
        <if test="cuttingToolVO.sharpenCriterion != null and cuttingToolVO.sharpenCriterion != '' " >
            and cutting_tools.sharpen_criterion = #{cuttingToolVO.sharpenCriterion}
        </if>
        <!-- 刀具长度 -->
        <if test="cuttingToolVO.materialLength != null and cuttingToolVO.materialLength != '' " >
            and cutting_tools.material_length = #{cuttingToolVO.materialLength}
        </if>
        <!-- 可刃磨长度 -->
        <if test="cuttingToolVO.sharpenLength != null and cuttingToolVO.sharpenLength != '' " >
            and cutting_tools.sharpen_length = #{cuttingToolVO.sharpenLength}
        </if>
        <!--  -->
        <if test="cuttingToolVO.isDel != null and cuttingToolVO.isDel != '' " >
            and cutting_tools.is_del = #{cuttingToolVO.isDel}
        </if>
        <!--  -->
        <if test="cuttingToolVO.beiMin != null and cuttingToolVO.beiMin != '' " >
            and cutting_tools.bei_min = #{cuttingToolVO.beiMin}
        </if>
        <!--  -->
        <if test="cuttingToolVO.beiMax != null and cuttingToolVO.beiMax != '' " >
            and cutting_tools.bei_max = #{cuttingToolVO.beiMax}
        </if>
        <!--  -->
        <if test="cuttingToolVO.toolPrice != null and cuttingToolVO.toolPrice != '' " >
            and cutting_tools.tool_price = #{cuttingToolVO.toolPrice}
        </if>
        <!--  -->
        <if test="cuttingToolVO.averagePrice != null and cuttingToolVO.averagePrice != '' " >
            and cutting_tools.average_price = #{cuttingToolVO.averagePrice}
        </if>
        <!--  -->
        <if test="cuttingToolVO.parametersType != null and cuttingToolVO.parametersType != '' " >
            and cutting_tools.parameters_type = #{cuttingToolVO.parametersType}
        </if>
        <!-- 用途类型 1 刀片,钻头，合成刀，热套类 2 一体刀 3筒刀 4专机 9其他 -->
        <if test="cuttingToolVO.userfulType != null and cuttingToolVO.userfulType != '' " >
            and cutting_tools.userful_type = #{cuttingToolVO.userfulType}
        </if>
        <!-- 启明编码 -->
        <if test="cuttingToolVO.qimingCode != null and cuttingToolVO.qimingCode != '' " >
            and cutting_tools.qiming_code = #{cuttingToolVO.qimingCode}
        </if>
        <!-- 物料编码 -->
        <if test="cuttingToolVO.wuliaoCode != null and cuttingToolVO.wuliaoCode != '' " >
            and cutting_tools.wuliao_code = #{cuttingToolVO.wuliaoCode}
        </if>
        </if>
        /*cutting_tool end*/
        /*sharpen_providers begin*/
        <if test="sharpenProviderVO != null ">
        <!-- 供应商id -->
        <if test="sharpenProviderVO.id != null and sharpenProviderVO.id != '' " >
            and sharpen_providers.id = #{sharpenProviderVO.id}
        </if>
        <!-- 编码 -->
        <if test="sharpenProviderVO.code != null and sharpenProviderVO.code != '' " >
            and sharpen_providers.code = #{sharpenProviderVO.code}
        </if>
        <!-- 名称 -->
        <if test="sharpenProviderVO.name != null and sharpenProviderVO.name != '' " >
            and sharpen_providers.name = #{sharpenProviderVO.name}
        </if>
        <!-- 类型 -->
        <if test="sharpenProviderVO.type != null and sharpenProviderVO.type != '' " >
            and sharpen_providers.type = #{sharpenProviderVO.type}
        </if>
        <!-- 地址 -->
        <if test="sharpenProviderVO.address != null and sharpenProviderVO.address != '' " >
            and sharpen_providers.address = #{sharpenProviderVO.address}
        </if>
        <!--  -->
        <if test="sharpenProviderVO.contact != null and sharpenProviderVO.contact != '' " >
            and sharpen_providers.contact = #{sharpenProviderVO.contact}
        </if>
        <!-- 联系人电话 -->
        <if test="sharpenProviderVO.tell != null and sharpenProviderVO.tell != '' " >
            and sharpen_providers.tell = #{sharpenProviderVO.tell}
        </if>
        <!--  -->
        <if test="sharpenProviderVO.isDel != null and sharpenProviderVO.isDel != '' " >
            and sharpen_providers.is_del = #{sharpenProviderVO.isDel}
        </if>
        </if>
        /*sharpen_provider end*/
    </select>
</mapper>